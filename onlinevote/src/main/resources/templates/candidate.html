<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candidate Registration | Cameroon Electoral System</title>
    <meta name="description" content="Register to vote in Cameroon elections">
    <link rel="stylesheet" th:href="@{/css/candidate.css}">
    <link rel="stylesheet" href="../static/css/candidate.css">
    <link rel="preload" th:href="@{/js/candidate.js}" as="script">
</head>
<body>
    <main class="registration-container">
        <header class="form-header">
            <h1 class="form-title">Candidate Registration</h1>
            <p class="form-subtitle">Join the democratic process. All fields are required.</p>
            <div class="progress-indicator">
                <div class="progress-step active" data-step="1"></div>
                <div class="progress-step" data-step="2"></div>
            </div>
        </header>

        <form id="candidateForm" th:action="@{/candidate/add}" th:object="${candidate}" method="post" novalidate>
            <!-- CSRF Token -->
            <!-- <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" /> -->
            
            <!-- Personal Information Section -->
            <section class="form-section active" data-section="1">
                <h2 class="section-title">
                    <span class="section-number">1</span>
                    Personal Information
                </h2>
                
                <div class="form-grid">
                    <div class="form-group floating-label">
                        <input id="firstname" type="text" th:field="*{firstname}" required 
                               minlength="3" maxlength="50" pattern="[A-Za-z\s\-']+"
                               placeholder=" " autocomplete="given-name">
                        <label for="firstname">First Name</label>
                        <div class="error-message" th:if="${#fields.hasErrors('firstname')}" 
                             th:errors="*{firstname}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="lastname" type="text" th:field="*{lastname}" required 
                               minlength="3" maxlength="50" pattern="[A-Za-z\s\-']+"
                               placeholder=" " autocomplete="family-name">
                        <label for="lastname">Last Name</label>
                        <div class="error-message" th:if="${#fields.hasErrors('lastname')}" 
                             th:errors="*{lastname}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="birthdate" type="date" th:field="*{birthdate}" required
                               placeholder=" " autocomplete="bday">
                        <label for="birthdate">Date of Birth</label>
                        <div class="error-message" th:if="${#fields.hasErrors('birthdate')}" 
                             th:errors="*{birthdate}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <select id="gender" th:field="*{gender}" required>
                            <option value="" disabled selected></option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                        <label for="gender">Gender</label>
                        <div class="error-message" th:if="${#fields.hasErrors('gender')}" 
                             th:errors="*{gender}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="email" type="email" th:field="*{email}" required maxlength="50"
                               pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                               placeholder=" " autocomplete="email">
                        <label for="email">Email Address</label>
                        <div class="error-message" th:if="${#fields.hasErrors('email')}" 
                             th:errors="*{email}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="number" type="tel" th:field="*{number}" required 
                               pattern="^[6-9][0-9]{8}$" maxlength="9"
                               placeholder=" " autocomplete="tel">
                        <label for="number">Phone Number</label>
                        <div class="error-message" th:if="${#fields.hasErrors('number')}" 
                             th:errors="*{number}"></div>
                    </div>
                </div>

                <div class="section-actions">
                    <button type="button" class="btn next-section" aria-label="Continue to location information">
                        Continue
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </section>

            <!-- Location & Political Information Section -->
            <section class="form-section" data-section="2">
                <h2 class="section-title">
                    <span class="section-number">2</span>
                    Location & Political Information
                </h2>
                
                <div class="form-grid">
                    <div class="form-group floating-label">
                        <input id="placeofbirth" type="text" th:field="*{placeofbirth}" required 
                               minlength="3" maxlength="50" pattern="[A-Za-z\s\-',.]+"
                               placeholder=" " autocomplete="off">
                        <label for="placeofbirth">Place of Birth</label>
                        <div class="error-message" th:if="${#fields.hasErrors('placeofbirth')}" 
                             th:errors="*{placeofbirth}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="location" type="text" th:field="*{location}" required 
                               minlength="3" maxlength="50" pattern="[A-Za-z\s\-',.]+"
                               placeholder=" " autocomplete="address-level2">
                        <label for="location">Current Location</label>
                        <div class="error-message" th:if="${#fields.hasErrors('location')}" 
                             th:errors="*{location}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="region" type="text" th:field="*{region}" required 
                               minlength="3" maxlength="50" pattern="[A-Za-z\s\-']+"
                               placeholder=" " autocomplete="address-level1">
                        <label for="region">Region of Origin</label>
                        <div class="error-message" th:if="${#fields.hasErrors('region')}" 
                             th:errors="*{region}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="department" type="text" th:field="*{department}" required 
                               minlength="3" maxlength="50" pattern="[A-Za-z\s\-']+"
                               placeholder=" " autocomplete="off">
                        <label for="department">Department of Origin</label>
                        <div class="error-message" th:if="${#fields.hasErrors('department')}" 
                             th:errors="*{department}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <input id="arron" type="text" th:field="*{arron}" required 
                               minlength="3" maxlength="50" pattern="[A-Za-z0-9\s\-']+"
                               placeholder=" " autocomplete="off">
                        <label for="arron">Borough of Origin</label>
                        <div class="error-message" th:if="${#fields.hasErrors('arron')}" 
                             th:errors="*{arron}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <select id="currentregion" th:field="*{currentregion}" required>
                            <option value="" disabled selected></option>
                            <option value="Adamawa">Adamawa</option>
                            <option value="Centre">Centre</option>
                            <option value="East">East</option>
                            <option value="Far North">Far North</option>
                            <option value="Littoral">Littoral</option>
                            <option value="North">North</option>
                            <option value="Northwest">Northwest</option>
                            <option value="South">South</option>
                            <option value="Southwest">Southwest</option>
                            <option value="West">West</option>
                        </select>
                        <label for="currentregion">Current Region</label>
                        <div class="error-message" th:if="${#fields.hasErrors('currentregion')}" 
                             th:errors="*{currentregion}"></div>
                    </div>

                    <div class="form-group floating">
                        <input id="registeredElectionIds" type="number" th:field="*{registeredElectionIds}" min="1"
                            placeholder=" " aria-required="true" required>
                        <label for="registeredElectionIds">Election ID <span class="required" aria-hidden="true">*</span></label>
                        <span class="error-message" th:if="${#fields.hasErrors('registeredElectionIds')}"
                            th:errors="*{registeredElectionIds}" role="alert"></span>
                    </div>

                    <div class="form-group floating-label">
                        <select id="party" th:field="*{party}" required>
                            <option value="" disabled selected></option>
                            <option value="RDPC">Rassemblement Démocratique du Peuple Camerounais (RDPC)</option>
                            <option value="UNDP">Union Nationale pour la Démocratie et le Progrès (UNDP)</option>
                            <option value="SDF">Front Social Démocrate (SDF)</option>
                            <option value="PCRN">Parti Camerounais pour la Réconciliation Nationale (PCRN)</option>
                            <option value="UDC">Union Démocratique du Cameroun (UDC)</option>
                            <option value="FSNC">Front pour le Salut National du Cameroun (FSNC)</option>
                            <option value="MDR">Mouvement pour la Défense de la République (MDR)</option>
                            <option value="UMS">Union des Mouvements Socialistes (UMS)</option>
                            <option value="UPC">Union des Populations du Cameroun (UPC)</option>
                            <option value="MRC">Mouvement pour la Renaissance du Cameroun (MRC)</option>
                            <option value="PRC">Parti Républicain du Cameroun (PRC)</option>
                            <option value="PDC">Parti des Démocrates Camerounais (PDC)</option>
                            <option value="ADD">Alliance pour la Démocratie et le Développement (ADD)</option>
                            <option value="UPA">Union des Populations Africaines (UPA)</option>
                            <option value="MP">Mouvement Progressiste (MP)</option>
                            <option value="CAC">Croire au Cameroun (CAC)</option>
                        </select>
                        <label for="party">Political Party</label>
                        <div class="error-message" th:if="${#fields.hasErrors('party')}" 
                             th:errors="*{party}"></div>
                    </div>

                    <div class="form-group floating-label">
                        <select id="role" th:field="*{role}" required>
                            <option value="" disabled selected></option>
                            <option value="CANDIDATE">Candidate</option>
                        </select>
                        <label for="role">Registration Role</label>
                        <div class="error-message" th:if="${#fields.hasErrors('role')}" 
                             th:errors="*{role}"></div>
                    </div>

                    <div id="candidateFields" class="candidate-fields">
                        <div class="form-group floating-label">
                            <input id="deposit" type="number" th:field="*{deposit}" 
                                   min="0" step="0.01" placeholder=" "
                                   aria-label="Deposit amount in FCFA">
                            <label for="deposit">Deposit Amount (FCFA)</label>
                            <div class="error-message" th:if="${#fields.hasErrors('deposit')}" 
                                 th:errors="*{deposit}"></div>
                        </div>

                    </div>
                </div>

                <div class="section-actions">
                    <button type="button" class="btn prev-section" aria-label="Back to personal information">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </button>
                    <button type="submit" class="btn btn-primary" id="submitButton">
                        <span class="btn-text">Complete Registration</span>
                        <span class="loading-spinner" aria-hidden="true"></span>
                    </button>
                </div>
            </section>
        </form>

        <div class="form-footer">
            <p>Already registered? <a th:href="@{/auth}">Sign in here</a></p>
            <p>By registering, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>.</p>
        </div>
    </main>

    <div class="notification" id="notification" role="alert" aria-live="assertive"></div>

    <script th:src="@{/js/candidate.js}"></script>
    <script src="../static/js/candidate.js"></script>
</body>
</html>